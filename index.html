<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Abhijith R // Portfolio</title> <!-- Portfolio Title -->

    <!-- Tinker Theme Font Imports -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Bebas+Neue&family=Caveat:wght@700&family=Gochi+Hand&family=Instrument+Serif:ital@0;1&family=Pixelify+Sans:wght@400;700&family=UnifrakturCook:wght@700&display=swap" rel="stylesheet">
    <link href="https://api.fontshare.com/v2/css?f[]=general-sans@400,600,700&display=swap" rel="stylesheet">

    <!-- Font Awesome for Social Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="images/logo.png"> <!-- Ensure path is correct -->

    <style>
      /* --- CSS Variables for Tinker Theme Dark Mode --- */
      :root {
        --color-bg-dark: #1a1a1a;
        --color-text-light: #e0e0e0;
        --color-text-muted: #a0a0a0;
        --color-border-light: #444444;
        --color-primary-glow: #7f7cec; /* Lighter Purple */
        --color-secondary-glow: #d4ff3a; /* Brighter Lime */
        --color-accent1-glow: #fff050; /* Brighter Yellow */
        --color-accent2-glow: #ffafff; /* Brighter Pink */
        --color-accent3-glow: #ffae4d; /* Brighter Orange */
      }

      /* --- Base Styles --- */
      *, *::before, *::after {
        box-sizing: border-box;
      }

      html {
          scroll-behavior: smooth;
          scroll-padding-top: 80px; /* Offset for fixed header */
      }

      body {
        margin: 0;
        padding: 0;
        font-family: 'General Sans', sans-serif;
        background-color: var(--color-bg-dark);
        color: var(--color-text-light);
        overflow-x: hidden;
      }

      /* --- Star Background --- */
      #starCanvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        z-index: 0;
        display: block;
      }

      /* --- Header Banner --- */
      #banner {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        background: rgba(15, 15, 15, 0.8); /* Slightly more opaque */
        backdrop-filter: blur(6px);
        -webkit-backdrop-filter: blur(6px);
        padding: 10px 20px;
        z-index: 1000;
        border-bottom: 2px solid var(--color-border-light);
        min-height: 65px; /* Ensure height */
      }

      #banner .banner-content {
         max-width: 1200px;
         width: 100%;
         margin: 0 auto;
         display: flex;
         justify-content: space-between;
         align-items: center;
      }

      #banner .logo-link img {
        width: 45px; /* Slightly larger logo */
        height: 45px;
        display: block;
        transition: transform 0.3s ease;
      }
      #banner .logo-link:hover img {
          transform: rotate(-15deg) scale(1.1);
      }

      #banner nav {
          display: flex;
          gap: 20px; /* Adjust gap */
          align-items: center;
      }

      #banner nav a {
        color: var(--color-text-muted); /* Muted default color */
        text-decoration: none;
        font-family: 'Bebas Neue', sans-serif;
        font-size: 1.1rem; /* Slightly smaller nav links */
        letter-spacing: 0.8px;
        padding: 5px 8px;
        border-radius: 4px;
        transition: all 0.3s ease;
        border-bottom: 2px solid transparent; /* For active state */
      }

      #banner nav a:hover {
        color: var(--color-secondary-glow); /* Lime hover */
        text-shadow: 0 0 5px var(--color-secondary-glow);
        transform: translateY(-2px);
      }
       /* Style for indicating active section (can be added via JS on scroll) */
       #banner nav a.active {
           color: var(--color-text-light);
           border-bottom-color: var(--color-secondary-glow);
       }


      /* Header Spacer */
      .header-spacer {
          height: 80px; /* Adjust based on final banner height */
      }

      /* --- General Section Styling --- */
      .section {
        position: relative;
        z-index: 5;
        padding: 80px 20px; /* Increased vertical padding */
        max-width: 950px;
        margin: 0 auto 40px auto; /* Center sections with bottom margin */
        text-align: center;
        border-radius: 15px; /* Add subtle rounding */
        /* Add subtle background to differentiate sections */
        background: rgba(35, 35, 35, 0.3);
        border: 1px solid var(--color-border-light);
      }

      .section h2 { /* Main Section Title */
        font-family: 'Anton', sans-serif; /* Changed from Bebas Neue */
        font-size: clamp(2.2rem, 7vw, 3.5rem);
        text-align: center;
        margin-bottom: 40px; /* More space below heading */
        color: var(--color-text-light);
        letter-spacing: 1px;
        text-transform: uppercase;
        display: inline-block;
        padding-bottom: 10px;
        position: relative; /* For pseudo-element underline */
        transform: rotate(-1deg); /* Tinker tilt */
      }
      /* Underline effect using pseudo-element */
      .section h2::after {
          content: '';
          position: absolute;
          bottom: 0;
          left: 10%;
          width: 80%;
          height: 4px;
          background: linear-gradient(90deg, var(--color-secondary-glow), var(--color-primary-glow)); /* Gradient underline */
          border-radius: 2px;
          transform: skewX(-15deg); /* Skewed underline */
      }


      .section p {
        font-family: 'General Sans', sans-serif;
        line-height: 1.8; /* Slightly more line spacing */
        color: var(--color-text-muted);
        margin-bottom: 1.5rem;
        font-size: 1.1rem; /* Slightly larger base text */
        max-width: 700px; /* Limit paragraph width */
        margin-left: auto;
        margin-right: auto;
      }

       /* Tinker Button Style */
      .tinker-button {
        display: inline-block;
        padding: 12px 30px;
        background-color: var(--color-secondary-glow);
        color: var(--color-bg-dark);
        font-family: 'Bebas Neue', sans-serif;
        font-size: 1.3rem;
        letter-spacing: 1px;
        text-decoration: none;
        border: 2px solid var(--color-bg-dark);
        border-radius: 5px;
        box-shadow: 3px 3px 0px var(--color-bg-dark);
        transition: all 0.2s ease-in-out;
        cursor: pointer;
        text-transform: uppercase;
      }
      .tinker-button:hover {
        background-color: var(--color-accent1-glow);
        transform: translateY(-2px) rotate(2deg);
        box-shadow: 4px 4px 0px var(--color-bg-dark);
      }

      /* --- Hero Section (#hero) --- */
      #hero {
        min-height: 90vh; /* Make hero section taller */
        display: flex;
        flex-direction: column;
        justify-content: center;
        background: none; /* Remove section background */
        border: none; /* Remove section border */
        padding-top: 0; padding-bottom: 0; /* Remove section padding */
      }

      #hero .hero-content { /* Container for hero text */
          position: relative;
          z-index: 10;
          padding: 20px;
          /* Add a subtle backdrop for readability over stars if needed */
          /* background: rgba(0, 0, 0, 0.1); */
          /* border-radius: 10px; */
      }


      #hero h1.name-main { /* The Name */
        font-family: 'Anton', sans-serif;
        font-size: clamp(3.5rem, 12vw, 7rem);
        color: var(--color-text-light);
        margin: 0;
        line-height: 1.1;
        text-shadow: 4px 4px 0px var(--color-secondary-glow),
                     -4px -4px 0px var(--color-primary-glow);
        transform: rotate(-2deg);
        letter-spacing: 2px;
      }

      #hero #typing-tagline { /* Typing Animation */
        font-family: 'Pixelify Sans', sans-serif;
        font-size: clamp(1.3rem, 4vw, 2rem);
        color: var(--color-text-muted);
        margin: 20px 0 30px 0;
        min-height: 2.8em;
        line-height: 1.4;
        letter-spacing: 1px;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        display: inline-block;
        vertical-align: middle;
      }

      #hero #typing-tagline .cursor {
        display: inline-block;
        background-color: var(--color-secondary-glow);
        box-shadow: 0 0 5px var(--color-secondary-glow);
        width: 12px; /* Slightly wider cursor */
        height: 1.4em;
        margin-left: 6px;
        vertical-align: middle;
        animation: blink 0.7s infinite steps(1, start);
      }
      @keyframes blink { 50% { opacity: 0; } }

      /* Scroll Down Indicator (Optional) */
      .scroll-down {
          position: absolute;
          bottom: 30px;
          left: 50%;
          transform: translateX(-50%);
          color: var(--color-text-muted);
          font-size: 2rem;
          animation: bounce 2s infinite ease-in-out;
          z-index: 15; /* Ensure it's clickable */
          opacity: 0.7;
      }
      .scroll-down a { color: inherit; text-decoration: none;}
      @keyframes bounce {
          0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); }
          40% { transform: translateX(-50%) translateY(-15px); }
          60% { transform: translateX(-50%) translateY(-10px); }
      }


      /* --- About Section (#about) --- */
      #about .profile {
        display: block;
        margin: 0 auto 30px;
        border-radius: 50%;
        width: 180px;
        height: 180px;
        object-fit: cover;
        border: 5px solid var(--color-text-light);
        box-shadow: 0 0 20px var(--color-primary-glow),
                    6px 6px 0px var(--color-border-light);
        transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        transform: rotate(4deg);
      }
       #about .profile:hover {
           transform: rotate(-3deg) scale(1.08);
       }
      #about .about-text {
          font-family: 'Instrument Serif', serif; /* Use serif for about */
          text-align: justify; /* Justify text for a cleaner look */
          font-size: 1.15rem;
          color: var(--color-text-light); /* Brighter than muted */
          margin-bottom: 30px;
      }
      #about .tinker-button { margin-top: 20px; } /* Space for CV button */


      /* --- Skills Section (#skills) --- */
      #skills .skills-container {
          display: flex;
          flex-wrap: wrap;
          justify-content: center;
          gap: 15px; /* Gap between tags */
          margin-top: 20px;
      }
      .skill-tag {
          font-family: 'Pixelify Sans', sans-serif; /* Pixel font for skills */
          background-color: rgba(255, 255, 255, 0.1);
          border: 1px solid var(--color-border-light);
          color: var(--color-text-light);
          padding: 8px 15px;
          border-radius: 5px;
          font-size: 1rem;
          letter-spacing: 0.5px;
          transition: all 0.2s ease;
          transform: rotate(calc( (rand() - 0.5) * 4deg )); /* Random tilt via potential JS later */
          /* Temporary static tilt: */
          /* transform: rotate(1deg); */
      }
       .skill-tag:nth-child(3n+1) { background-color: rgba(127, 124, 236, 0.2); border-color: var(--color-primary-glow); /* transform: rotate(-2deg); */}
       .skill-tag:nth-child(3n+2) { background-color: rgba(212, 255, 58, 0.2); border-color: var(--color-secondary-glow); /* transform: rotate(1deg); */}
       .skill-tag:nth-child(3n)   { background-color: rgba(255, 175, 255, 0.2); border-color: var(--color-accent2-glow); /* transform: rotate(-1deg); */}

      .skill-tag:hover {
          background-color: var(--color-accent1-glow); /* Yellow hover */
          color: var(--color-bg-dark);
          border-color: var(--color-bg-dark);
          transform: scale(1.1) rotate(0deg); /* Straighten and scale */
          box-shadow: 0 0 10px var(--color-accent1-glow);
      }


      /* --- Projects Section (#projects) --- */
      .repo-container {
        display: grid; /* Use grid for better alignment control */
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Responsive columns */
        gap: 30px; /* Grid gap */
        justify-content: center;
        padding: 20px 0;
      }
      .repo-card {
        background: rgba(45, 45, 45, 0.85); /* Slightly darker cards */
        backdrop-filter: blur(4px);
        border-radius: 10px;
        padding: 25px;
        box-shadow: 5px 5px 0px rgba(0, 0, 0, 0.5);
        border: 1px solid var(--color-border-light);
        text-align: left;
        transition: transform 0.25s ease, box-shadow 0.25s ease;
        transform: rotate(0.5deg);
        display: flex; /* Use flex for layout inside card */
        flex-direction: column;
      }
      .repo-card:hover {
          transform: translateY(-6px) rotate(-1.5deg);
          box-shadow: 8px 8px 0px var(--color-primary-glow);
      }

      .repo-card h3 {
        margin: 0 0 10px 0;
        font-size: 1.4rem; /* Larger repo title */
        font-family: 'Bebas Neue', sans-serif;
        color: var(--color-secondary-glow);
      }
      .repo-card h3 a { color: inherit; text-decoration: none; }
      .repo-card h3 a:hover { text-decoration: underline; color: var(--color-accent1-glow); }

      .repo-card p {
        font-size: 0.95rem; /* Slightly larger description */
        color: var(--color-text-muted);
        margin-bottom: 15px;
        text-align: left;
        line-height: 1.6;
        flex-grow: 1; /* Push meta info down */
      }
       .repo-card .repo-meta { /* Container for stars/language */
           font-family: 'Pixelify Sans', sans-serif;
           font-size: 0.9rem;
           color: var(--color-text-muted);
           display: flex;
           justify-content: space-between; /* Space out stars and language */
           margin-top: 15px;
           border-top: 1px dashed var(--color-border-light);
           padding-top: 10px;
       }
       .repo-meta .lang {
           background: rgba(255, 255, 255, 0.1);
           padding: 2px 6px;
           border-radius: 4px;
           border: 1px solid var(--color-border-light);
       }

      /* --- Contacts Section (#contacts) --- */
       #contacts {
            border-top: 2px dashed var(--color-border-light);
            margin-top: 40px;
            padding-bottom: 60px; /* More space at bottom */
        }
      #contacts p {
        font-family: 'Instrument Serif', serif;
        font-style: italic;
        font-size: 1.2rem; /* Larger contact text */
      }
      #contacts p a.glow-text {
        font-family: inherit;
        font-style: italic;
        color: var(--color-accent1-glow);
        text-decoration: underline;
        text-shadow: 0 0 8px var(--color-accent1-glow);
         transition: color 0.3s, text-shadow 0.3s;
      }
      #contacts p a.glow-text:hover {
          color: #fff;
          text-shadow: 0 0 15px var(--color-accent1-glow), 0 0 25px var(--color-accent3-glow);
      }

      #socials {
        text-align: center;
        margin-top: 40px; /* More space above icons */
      }
      #socials a {
        margin: 0 15px;
        display: inline-block;
        font-size: 2.2rem; /* Larger social icons */
        color: var(--color-text-muted);
        transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }
      #socials a:hover {
          transform: scale(1.35) rotate(8deg) translateY(-5px); /* More dramatic hover */
          color: var(--color-accent2-glow);
          filter: drop-shadow(0 0 10px currentColor);
      }
      #socials a.github:hover { color: var(--color-secondary-glow); }
      #socials a.linkedin:hover { color: var(--color-primary-glow); }
      #socials a.instagram:hover { color: var(--color-accent2-glow); }


      /* --- Footer --- */
      .site-footer { /* Added for clarity */
          position: relative; /* Ensures footer is below content */
          z-index: 5;
          padding: 2rem 1rem 1.5rem;
          text-align: center;
          margin-top: 2rem; /* Space before footer */
          border-top: 3px dashed var(--color-border-light); /* Dashed border */
          background-color: rgba(26, 26, 26, 0.5); /* Slightly different dark */
      }
      .footer-credit {
          font-family: 'Pixelify Sans', sans-serif;
          font-size: 1rem;
          font-weight: 700;
          color: var(--color-text-muted);
          padding: 5px 10px;
          transition: color 0.3s;
       }
       .footer-credit:hover {
           color: var(--color-accent1-glow);
       }


      /* --- Responsive --- */
       @media (max-width: 768px) {
           html { scroll-padding-top: 70px; }
           #banner nav { gap: 15px; }
           #banner nav a { font-size: 1rem; }
           .header-spacer { height: 70px; }
           .section { padding: 60px 15px; }
           #about .profile { width: 150px; height: 150px; }
           .repo-card { width: calc(50% - 20px); } /* Two columns */
           #socials a { font-size: 2rem; margin: 0 12px; }
           .skills-container { gap: 10px; }
           .skill-tag { font-size: 0.9rem; padding: 6px 12px;}
       }
        @media (max-width: 520px) { /* Adjusted breakpoint */
            html { scroll-padding-top: 60px; }
            #banner { padding: 8px 15px; min-height: 60px;}
            #banner .logo-link img { width: 35px; height: 35px; }
            #banner nav { gap: 8px; }
            #banner nav a { font-size: 0.9rem; padding: 4px; }
            .header-spacer { height: 60px; }
            .section h1 { font-size: clamp(2.2rem, 10vw, 3rem); }
            .section h2 { font-size: clamp(1.6rem, 6vw, 2.4rem); margin-bottom: 30px;}
            .section p { font-size: 1rem; }
            #about .profile { width: 130px; height: 130px; }
            .repo-card { width: 95%; } /* Single column */
            #socials a { font-size: 1.8rem; margin: 0 8px; }
            .tinker-button { font-size: 1.1rem; padding: 10px 25px; }
            .skill-tag { font-size: 0.85rem; padding: 5px 10px;}
            .footer-credit { font-size: 0.8rem; }
        }

    </style>
</head>
<body onload="fetchPinnedRepos('jithurx')"> <!-- Fetch repos on load -->

    <!-- Star background canvas -->
    <canvas id="starCanvas"></canvas>

    <!-- Fixed Header Banner -->
    <header id="banner">
        <div class="banner-content">
            <a href="#hero" class="logo-link"> <!-- Link logo to top -->
                <img src="images/logo.png" alt="Logo" /> <!-- Ensure path is correct -->
            </a>
            <nav>
                <a href="#about">About</a>
                <a href="#skills">Skills</a>
                <a href="#projects">Projects</a>
                <a href="#contacts" class="glow-text">Contact</a>
            </nav>
        </div>
    </header>

    <!-- Header Spacer - MUST be present -->
    <div class="header-spacer"></div>

    <!-- Main Content Sections -->
    <main>
        <!-- Hero Section -->
        <section id="hero" class="section">
            <div class="hero-content">
                <!-- Name (Static - remove glitch/shake for portfolio clarity) -->
                 <h1 class="name-main">Abhijith R</h1>

                <!-- Tagline with Typing Animation -->
                <p id="typing-tagline" class="tagline"><span class="cursor">|</span></p>
             </div>
              <!-- Optional Scroll Down Indicator -->
             <div class="scroll-down">
                 <a href="#about" aria-label="Scroll down to about section">
                     <i class="fas fa-chevron-down"></i>
                 </a>
             </div>
        </section>

        <!-- About Section -->
        <section id="about" class="section">
            <h2>About Me</h2>
            <img src="images/me.jpg" alt="Profile Picture" class="profile" /> <!-- Ensure path is correct -->
            <p class="about-text">
                Hello! I'm Abhijith, a tinkerer passionate about the intersection of coding, electronics, and design. From diving into art and music to experimenting with new technologies, I love exploring creative ideas and bringing engaging digital experiences to life. My aim is to leverage technology to build interactive and meaningful projects, always striving for innovation and a touch of fun.
            </p>
            <a href="cv.html" class="tinker-button"> View My CV </a>
        </section>

        <!-- Skills Section -->
        <section id="skills" class="section">
            <h2>My Skillset</h2>
            <p>Here are some of the technologies and tools I enjoy working with:</p>
            <div class="skills-container">
                <!-- Add your skills here as tags -->
                <span class="skill-tag">HTML5</span>
                <span class="skill-tag">CSS3</span>
                <span class="skill-tag">JavaScript (ES6+)</span>
                <span class="skill-tag">React</span>
                <span class="skill-tag">Node.js</span>
                <span class="skill-tag">Express</span>
                <span class="skill-tag">MongoDB</span>
                <span class="skill-tag">Python</span>
                <span class="skill-tag">Arduino</span>
                <span class="skill-tag">Raspberry Pi</span>
                <span class="skill-tag">Git & GitHub</span>
                <span class="skill-tag">UI/UX Design</span>
                <span class="skill-tag">Figma</span>
                <span class="skill-tag">Blender</span>
                <!-- Add more skills -->
            </div>
        </section>

        <!-- Projects Section -->
        <section id="projects" class="section">
             <div>
                <h2>Featured Projects</h2>
                <p> A selection of projects from my GitHub profile. </p>
                <div id="repos" class="repo-container">
                    <!-- GitHub repos loaded here by JS -->
                    <p style="color: var(--color-text-muted);">Loading repositories...</p>
                </div>
                 <a href="https://github.com/jithurx?tab=repositories" target="_blank" rel="noopener noreferrer" class="tinker-button" style="margin-top: 20px; background-color: var(--color-primary-glow); border-color: var(--color-bg-dark); box-shadow-color: var(--color-bg-dark);">See More on GitHub</a>
            </div>
        </section>

        <!-- Contacts Section -->
        <section id="contacts" class="section">
            <h2>Get In Touch</h2>
            <p> Interested in collaborating or have a question? Feel free to reach out! </p>
            <p>
                Email: <a href="mailto:abhijithxr@gmail.com" class="glow-text">abhijithxr@gmail.com</a>
            </p>
            <div id="socials">
                <a href="https://github.com/jithurx" target="_blank" rel="noopener noreferrer" aria-label="GitHub" class="github" title="GitHub">
                    <i class="fab fa-github"></i>
                </a>
                <a href="https://instagram.com/koffee.code" target="_blank" rel="noopener noreferrer" aria-label="Instagram" class="instagram" title="Instagram">
                    <i class="fab fa-instagram"></i>
                </a>
                <a href="https://www.linkedin.com/in/abhijith-r-769a99323" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn" class="linkedin" title="LinkedIn">
                    <i class="fab fa-linkedin-in"></i>
                </a>
                <!-- Add Spotify/Pinterest back if needed -->
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
         <div class="footer-credit"><-></div>
    </footer>


    <!-- Star Animation Script -->
    <script>
      // (Star animation script remains exactly the same - place it here)
       const canvas = document.getElementById("starCanvas");
      const ctx = canvas.getContext("2d");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      const numStars = 1100; // Reduced for potentially better performance
      const sphereRadius = 3;
      const stars = [];
      const cameraZ = 3;
      let scaleFactor = Math.min(canvas.width, canvas.height) / 4;
      const fixedAngle = Math.PI / 4;
      const cosFixed = Math.cos(fixedAngle);
      const sinFixed = Math.sin(fixedAngle);
      function randomPointInSphere(radius) {
        const u = Math.random(); const v = Math.random(); const w = Math.random();
        const r = radius * Math.cbrt(u);
        const theta = Math.acos(1 - 2 * v); const phi = 2 * Math.PI * w;
        const x = r * Math.sin(theta) * Math.cos(phi);
        const y = r * Math.sin(theta) * Math.sin(phi);
        const z = r * Math.cos(theta);
        return { x, y, z };
      }
      for (let i = 0; i < numStars; i++) { stars.push(randomPointInSphere(sphereRadius)); }
      let rotationX = 0; let rotationY = 0; let lastTime = performance.now();
      function animate(currentTime) {
        const delta = (currentTime - lastTime) / 1000; lastTime = currentTime;
        rotationX -= delta * 0.05; rotationY -= delta * 0.08;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "rgba(255, 255, 255, 0.8)";
        const cosX = Math.cos(rotationX); const sinX = Math.sin(rotationX);
        const cosY = Math.cos(rotationY); const sinY = Math.sin(rotationY);
        for (let i = 0; i < numStars; i++) {
          const star = stars[i]; let { x, y, z } = star;
          let x_y = x * cosY + z * sinY; let z_y = -x * sinY + z * cosY;
          let y_x = y * cosX - z_y * sinX; let z_x = y * sinX + z_y * cosX;
          let x_final = x_y * cosFixed - y_x * sinFixed; let y_final = x_y * sinFixed + y_x * cosFixed;
          let z_final = z_x;
          if (cameraZ - z_final <= 0.1) continue;
          const perspective = cameraZ / (cameraZ - z_final);
          if (perspective < 0 || perspective > 100) continue;
          const screenX = x_final * perspective * scaleFactor + canvas.width / 2;
          const screenY = y_final * perspective * scaleFactor + canvas.height / 2;
          const size = Math.max(0.1, perspective * 0.6);
          const opacity = Math.max(0.1, Math.min(1, perspective * 0.4));
          ctx.globalAlpha = opacity;
          ctx.beginPath(); ctx.arc(screenX, screenY, size, 0, 2 * Math.PI); ctx.fill();
        }
        ctx.globalAlpha = 1.0;
        requestAnimationFrame(animate);
      }
      requestAnimationFrame(animate);
      window.addEventListener("resize", () => {
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        scaleFactor = Math.min(canvas.width, canvas.height) / 4;
      });
    </script>

    <!-- Typing Animation Script -->
    <script>
       // (Typing animation script remains exactly the same - place it here)
        document.addEventListener('DOMContentLoaded', () => {
            const taglineEl = document.getElementById('typing-tagline');
            const cursorEl = taglineEl ? taglineEl.querySelector('.cursor') : null;
            if (!taglineEl || !cursorEl) { console.error("Typing tagline/cursor missing!"); return; }
            const words = [ 'Developer', 'Tinkerer', 'Designer?', 'Learner', 'Creator', 'Electronics Hobbyist' ]; // Updated words
            let wordIndex = 0; let charIndex = 0; let isDeleting = false;
            const typingSpeed = 110; const deletingSpeed = 55; // Slightly faster
            const pauseBeforeDelete = 1400; const pauseBeforeType = 250;
            function type() {
                const currentWord = words[wordIndex]; let textToDisplay = ''; let timeoutSpeed = typingSpeed;
                if (isDeleting) {
                    textToDisplay = currentWord.substring(0, charIndex - 1); charIndex--; timeoutSpeed = deletingSpeed;
                } else {
                    textToDisplay = currentWord.substring(0, charIndex + 1); charIndex++; timeoutSpeed = typingSpeed;
                }
                taglineEl.textContent = textToDisplay; taglineEl.appendChild(cursorEl);
                if (!isDeleting && charIndex === currentWord.length) {
                    timeoutSpeed = pauseBeforeDelete; isDeleting = true;
                } else if (isDeleting && charIndex === 0) {
                    timeoutSpeed = pauseBeforeType; isDeleting = false; wordIndex = (wordIndex + 1) % words.length;
                }
                setTimeout(type, timeoutSpeed);
            }
            setTimeout(type, pauseBeforeType + 500);
        });
    </script>

    <!-- GitHub Repo Fetch Script -->
    <script>
      async function fetchPinnedRepos(username) {
        const repoContainer = document.getElementById("repos");
        if (!repoContainer) { console.error("Repo container not found"); return; }

        repoContainer.innerHTML = "<p style='color: var(--color-text-muted);'>Loading repositories...</p>"; // Loading message

        try {
            // Added check for username to prevent unnecessary fetch
            if (!username) throw new Error("GitHub username is not provided.");

            const response = await fetch(`https://gh-pinned-repos.egoist.dev/?username=${encodeURIComponent(username)}`); // Encode username

            if (!response.ok) {
                // Provide more context for failed fetches
                 const errorText = await response.text(); // Try to get error text from API
                 console.error(`GitHub API Error (${response.status}): ${errorText}`);
                throw new Error(`Failed to fetch repos (Status: ${response.status})`);
            }

            const repos = await response.json();
            repoContainer.innerHTML = ""; // Clear loading/error message only on success

            if (repos && repos.length > 0) {
                repos.forEach(repo => {
                    const repoCard = document.createElement("div");
                    repoCard.classList.add("repo-card");
                    // Added rel="noopener noreferrer" for security
                    repoCard.innerHTML = `
                        <h3><a href="${repo.link}" target="_blank" rel="noopener noreferrer">${repo.repo}</a></h3>
                        <p>${repo.description || 'No description provided.'}</p>
                        <div class="repo-meta">
                           <span>⭐ ${repo.stars ?? 0}</span>
                           <span class="lang">${repo.language || 'N/A'}</span>
                        </div>
                    `;
                    repoContainer.appendChild(repoCard);
                });
            } else {
                repoContainer.innerHTML = "<p style='color: var(--color-text-muted);'>No pinned repositories found for this user.</p>";
            }
        } catch (error) {
            console.error("Error fetching pinned repos:", error);
            repoContainer.innerHTML = `<p style='color: var(--color-accent3-glow);'>Could not load projects. ${error.message}</p>`;
        }
      }
    </script>

</body>
</html>